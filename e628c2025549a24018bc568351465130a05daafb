{
  "comments": [
    {
      "key": {
        "uuid": "ffb9cba7_7bd1a057",
        "filename": "lib/append.c",
        "patchSetId": 1
      },
      "lineNbr": 275,
      "author": {
        "id": 14090
      },
      "writtenOn": "2016-02-12T04:53:29Z",
      "side": 1,
      "message": "Shouldn\u0027t this be off_t?\n\nUse off64_t and open64 etc otherwise.\n\nSame comment for several other places in this change.",
      "revId": "e628c2025549a24018bc568351465130a05daafb",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ffb9cba7_9b933450",
        "filename": "lib/append.c",
        "patchSetId": 1
      },
      "lineNbr": 275,
      "author": {
        "id": 5503
      },
      "writtenOn": "2016-02-12T05:47:56Z",
      "side": 1,
      "message": "It can\u0027t be off_t because that is 32 bits on 32-bit platforms.  I could use off64_t but I don\u0027t really see the advantage -- they are the same type.  And th_get_size() returns an int64_t anyway.",
      "parentUuid": "ffb9cba7_7bd1a057",
      "revId": "e628c2025549a24018bc568351465130a05daafb",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ffb9cba7_1b9f4451",
        "filename": "lib/append.c",
        "patchSetId": 1
      },
      "lineNbr": 275,
      "author": {
        "id": 14090
      },
      "writtenOn": "2016-02-12T06:12:10Z",
      "side": 1,
      "message": "But th_get_size returns off_t everywhere else.\nhttp://linux.die.net/man/3/th_get_size\n\nIf you change oct_to_int to return off_t, your definition of th_get_size will be correct.\n\n   #define th_get_size(t) oct_to_int((t)-\u003eth_buf.size)\n\nIf you want to support large files on a 32-bit system, then you need to compile with -D_FILE_OFFSET_BITS\u003d64. That will cause off_t to be 64 bit.\n\nportability.h sets following define for all platforms.\n\n    // Always use long file support.\n   #define _FILE_OFFSET_BITS 64",
      "parentUuid": "ffb9cba7_9b933450",
      "revId": "e628c2025549a24018bc568351465130a05daafb",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ffb9cba7_bbf2b899",
        "filename": "lib/append.c",
        "patchSetId": 1
      },
      "lineNbr": 275,
      "author": {
        "id": 5503
      },
      "writtenOn": "2016-02-12T06:45:47Z",
      "side": 1,
      "message": "But I don\u0027t want or need to compile with _FILE_OFFSET_BITS set to anything.  On android at least, \"struct stat\" has a 64-bit st_size field (C type \"long long\") for both 32-bit and 64-bit platforms.  So the lstat() above in tar_append_file() will behave properly.  This is all tested and functional on a 32-bit android device.\n\nIn regards to the referenced manual page, it is incorrect.  th_get_size() is a macro, which calls oct_to_int(), which returned an \"int\" before this change.",
      "parentUuid": "ffb9cba7_1b9f4451",
      "revId": "e628c2025549a24018bc568351465130a05daafb",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ffb9cba7_9bd6d44f",
        "filename": "lib/util.c",
        "patchSetId": 1
      },
      "lineNbr": 131,
      "author": {
        "id": 14090
      },
      "writtenOn": "2016-02-12T04:53:29Z",
      "side": 1,
      "message": "Maybe use long long here so it\u0027s consistent with the printf/scanfs?",
      "revId": "e628c2025549a24018bc568351465130a05daafb",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ffb9cba7_3b980869",
        "filename": "lib/util.c",
        "patchSetId": 1
      },
      "lineNbr": 131,
      "author": {
        "id": 5503
      },
      "writtenOn": "2016-02-12T05:47:56Z",
      "side": 1,
      "message": "I wanted to get a more concrete type size as a return value.  The sscanf requires a C type, which is the only reason \"i\" is declared as a \"long long\".",
      "parentUuid": "ffb9cba7_9bd6d44f",
      "revId": "e628c2025549a24018bc568351465130a05daafb",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    }
  ]
}